# EzySpeechTranslate Production Configuration
# Version 3

# ============================================
# Main Server Configuration
# ============================================
server:
  host: "0.0.0.0"                    # Listen on all interfaces
  port: 1915                         # User frontend port
  debug: false                       # NEVER enable in production
  secret_key: "{{ GENERATE_RANDOM_SECRET_64_CHARS }}"  # MUST CHANGE!  
  use_https: false                    # Use HTTPS (true) or HTTP (false)
# ============================================
# Admin Frontend Server Configuration
# ============================================
admin_server:
  host: "0.0.0.0"                    # Admin interface
  port: 1916                         # Admin port (separate from main)
  debug: false                       # NEVER enable in production  
  use_https: false                    # Use HTTPS (true) or HTTP (false), must enable in production for web-speech-api
# ============================================
# Authentication Settings
# ============================================
authentication:
  enabled: true                      # Keep enabled for security
  admin_username: "admin"  # Change from default "admin"
  session_timeout: 7200              # 2 hours (7200 seconds)

# ============================================
# Logging Configuration
# ============================================
logging:
  level: "INFO"                      # Use INFO or WARNING in production
  file: "logs/app.log"               # Main application log
  max_bytes: 10485760                # 10MB per log file
  backup_count: 5                    # Keep 5 backup files
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# ============================================
# Database Configuration (Optional)
# ============================================
database:
  enabled: false                     # Enable if you need persistent storage
  type: "sqlite"                     # Options: sqlite, postgresql, mysql
  path: "data/translations.db"       # SQLite path

  # For PostgreSQL/MySQL:
  # host: "localhost"
  # port: 5432
  # username: "{{ DB_USERNAME }}"
  # password: "{{ DB_PASSWORD }}"
  # database: "ezyspeech"

# ============================================
# Export Configuration
# ============================================
export:
  default_format: "srt"              # Default: srt, txt, json, csv
  output_directory: "exports"        # Export directory
  include_timestamps: true
  include_corrections: true

# ============================================
# Advanced Settings - Security Hardened
# ============================================
advanced:
  # WebSocket settings
  websocket:
    ping_timeout: 60                 # Connection timeout (seconds)
    ping_interval: 25                # Keep-alive interval (seconds)
    max_message_size: 1048576        # 1MB max message size

  # Performance settings
  performance:
    max_concurrent_translations: 10  # Concurrent translation limit
    translation_timeout: 30          # Request timeout (seconds)
    cache_size: 1000                 # Max translations to cache

  # Security settings
  security:
    # IMPORTANT: Change CORS in production!
    # Development: Use "*"
    # Production: Specify your domain(s)
    cors_origins: "*"
    # Or multiple origins:
    # cors_origins:
    #   - "https://yourdomain.com"
    #   - "https://admin.yourdomain.com"

    rate_limit_enabled: true         # Enable in production
    max_requests_per_minute: 500      # Requests per IP per minute
    # Number of failed login attempts before temporary ban
    max_login_attempts: 10
    # Failed login window (minutes) before counts reset
    login_attempt_window_minutes: 15
    # Max login attempts per minute (rate for login requests)
    login_rate_limit: 20
    # Max simultaneous WebSocket connections allowed per IP
    max_ws_connections: 20
    # How many suspicious/rate violations before blocking IP
    max_rate_violations: 100
    # Block duration in minutes for blocked IPs
    block_duration_minutes: 60

# ============================================
# Feature Flags
# ============================================
features:
  text_to_speech: true               # Enable TTS
  real_time_sync: true               # Enable real-time sync
  export_enabled: true               # Allow exports
  dark_mode: true                    # Dark mode toggle

# ============================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================
# Before deploying to production:
#
# 1. Change server.secret_key to random 64+ character string
# 2. Change authentication.admin_password to strong password
# 3. Change authentication.jwt_secret to random string
# 4. Change authentication.admin_username from "admin"
# 5. Set advanced.security.cors_origins to your domain(s)
# 6. Enable advanced.security.rate_limit_enabled = true
# 7. Set server.debug = false
# 8. Set admin_server.debug = false
# 9. Set logging.level to "INFO" or "WARNING"
# 10. Generate proper SSL certificates (not self-signed)
# 11. Set up firewall rules
# 12. Configure reverse proxy (Nginx/Apache)
# 13. Set up log rotation
# 14. Configure backup strategy
# 15. Test all security features
#
# ============================================
# GENERATE SECURE SECRETS
# ============================================
# Run this Python command to generate secrets:
#
#   python3 -c "import secrets; print('SECRET_KEY:', secrets.token_hex(32)); print('JWT_SECRET:', secrets.token_hex(32))"
#
# Or use this bash command:
#
#   openssl rand -hex 32
#
# ============================================