<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="metaTitle">EzySpeech - Admin Panel</title>
    <meta data-i18n-meta="metaDescription" content="Admin panel for managing EzySpeech server and live translations" name="description">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body data-theme="light">
    <!-- Header -->
    <header class="pf-c-page__header">
        <div class="header-left">
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" id="mobileMenuToggle">
                <span>‚ò∞</span>
            </button>
            <div class="brand">
                <span>üéôÔ∏è</span>
                <span data-i18n="brand_admin">EzySpeech Admin</span>
            </div>
            <div id="statusBadge" class="connection-badge offline">
                <span class="status-dot"></span>
                <span data-i18n="offline">Disconnected</span>
            </div>
        </div>
        <div class="header-right">
            <button class="logout-btn" onclick="logout()">
                <span>üö™</span>
                <span data-i18n="logout">Logout</span>
            </button>
        </div>
    </header>

    <!-- Mobile Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileMenu()"></div>

    <!-- Main Content -->
    <div class="pf-c-page__main">
        <!-- Sidebar -->
        <aside class="pf-c-page__sidebar" id="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title" data-i18n="audioControls">Audio Controls</h3>

                <div class="control-group">
                    <label class="control-label" data-i18n="sourceLanguage">Source Language</label>
                    <select id="sourceLangSelect" onchange="changeSourceLanguage()">
                        <option value="en-US" data-i18n="englishUS">English (US)</option>
                        <option value="en-GB" data-i18n="englishUK">English (UK)</option>
                        <option value="zh-CN" data-i18n="chineseMandarin">‰∏≠Êñá (ÊôÆÈÄöËØù)</option>
                        <option value="yue-Hant-HK">Á≤µË™û</option>
                        <option value="ja-JP">Êó•Êú¨Ë™û</option>
                        <option value="ko-KR">ÌïúÍµ≠Ïñ¥</option>
                        <option value="es-ES">Espa√±ol</option>
                        <option value="fr-FR">Fran√ßais</option>
                        <option value="de-DE">Deutsch</option>
                    </select>
                </div>

                <div class="control-group">
                    <label class="control-label" data-i18n="audioDevice">Audio Device</label>
                    <select id="deviceSelect">
                        <option data-i18n="loading">Loading...</option>
                    </select>
                </div>

                <div class="control-group">
                    <button id="recordBtn" class="pf-c-button pf-c-button--success" onclick="toggleRecording()">
                        <span data-i18n="startRecording">üéôÔ∏è Start Recording</span>
                    </button>
                    <div class="auto-restart-badge" style="display: none;" id="autoRestartBadge">
                        <span>üîÑ</span>
                        <span data-i18n="autoRestartEnabled">Auto-restart enabled</span>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label" data-i18n="recognizing">Recognizing...</label>
                    <div id="interimDisplay" class="interim-display inactive">
                        <span id="interimText" data-i18n="waitingForSpeech">Waiting for speech...</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title" data-i18n="actions">Actions</h3>
                <div class="button-group">
                    <button class="pf-c-button pf-c-button--primary" onclick="addNewItem()"><span>‚ûï</span> <span data-i18n="add">Add</span></button>
                    <button class="pf-c-button pf-c-button--primary" onclick="editSelected()"><span>‚úèÔ∏è</span> <span data-i18n="edit">Edit</span></button>
                    <button class="pf-c-button pf-c-button--danger" onclick="deleteSelected()"><span>üóëÔ∏è</span> <span data-i18n="delete">Delete</span></button>
                    <button class="pf-c-button pf-c-button--secondary" onclick="clearHistory()"><span data-i18n="clearAll">Clear All</span></button>
                </div>
                <button class="pf-c-button pf-c-button--success" style="margin-top: 0.5rem;" onclick="exportData()"><span>üì§</span> <span data-i18n="export">Export</span></button>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title" data-i18n="settings">Settings</h3>
                <div class="control-group">
                    <label class="control-label" data-i18n="displayLanguage">Interface Language</label>
                    <select id="displayLanguage" onchange="(function(el){ const v = el.value; if(!v){ localStorage.removeItem('displayLanguage'); if(window.applyDisplayLanguage) window.applyDisplayLanguage(); } else { if(window.changeDisplayLanguage) window.changeDisplayLanguage(v); else { localStorage.setItem('displayLanguage', v); if(window.applyDisplayLanguage) window.applyDisplayLanguage(); } } })(this)">
                        <option value="">Auto</option>
                        <option value="en">English</option>
                        <option value="zh">‰∏≠Êñá</option>
                        <option value="yue">Á≤µË™û</option>
                        <option value="zh-tw">ÁπÅÈ´î‰∏≠Êñá</option>
                        <option value="ja">Êó•Êú¨Ë™û</option>
                        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                        <option value="es">Espa√±ol</option>
                        <option value="fr">Fran√ßais</option>
                        <option value="de">Deutsch</option>
                        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                        <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                        <option value="pt">Portugu√™s</option>
                        <option value="it">Italiano</option>
                        <option value="nl">Nederlands</option>
                        <option value="pl">Polski</option>
                        <option value="tr">T√ºrk√ße</option>
                        <option value="vi">Ti·∫øng Vi·ªát</option>
                        <option value="th">‡πÑ‡∏ó‡∏¢</option>
                        <option value="id">Bahasa Indonesia</option>
                        <option value="ms">Bahasa Melayu</option>
                        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                    </select>
                </div>
                <div class="control-group">
                    <button class="sidebar-menu-item" onclick="toggleTheme(); closeMobileMenu();">
                        <span id="themeIcon">üåô</span>
                        <span id="themeText" data-i18n="darkMode">Dark Mode</span>
                    </button>
                </div>
                <div class="control-group">
                    <button class="sidebar-menu-item" onclick="showAbout(); closeMobileMenu();">
                        <span>‚ÑπÔ∏è</span>
                        <span data-i18n="about">About</span>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Section -->
        <section class="pf-c-page__main-section">
            <div class="content-header">
                <h2 class="content-title">
                    <span data-i18n="liveTranscriptions">Transcriptions</span>
                    <span class="count-badge" id="itemCount">0</span>
                </h2>
                <div style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-secondary); font-size: 0.875rem;">
                    <span>‚ãÆ‚ãÆ</span>
                    <span data-i18n="dragToReorder">Drag to reorder</span>
                </div>
            </div>

            <div id="transcriptionsList" class="transcription-list">
                <div class="empty-state">
                    <div class="empty-icon">üí¨</div>
                    <div data-i18n="noTranscriptionsYet">No transcriptions yet</div>
                    <small data-i18n="waitingDesc" style="display: block; margin-top: 0.5rem; opacity: 0.7;">
                        Start recording to see transcriptions
                    </small>
                </div>
            </div>
        </section>

        <!-- Edit Panel -->
        <aside class="edit-panel">
            <div class="panel-section">
                <h3 class="panel-title" data-i18n="editAndCorrect">Edit & Correct</h3>

                <div class="control-group">
                    <label class="control-label" data-i18n="original">Original</label>
                    <textarea id="originalText" disabled></textarea>
                </div>

                <div class="control-group">
                    <label class="control-label" data-i18n="correctedLabel">Corrected (Edit Here)</label>
                    <textarea id="correctedText" data-i18n-placeholder="selectItemToEdit" placeholder="Select an item to edit..."></textarea>
                </div>

                <div class="button-group">
                    <button class="pf-c-button pf-c-button--success" onclick="saveCorrection()">üíæ <span data-i18n="save">Save</span></button>
                    <button class="pf-c-button pf-c-button--secondary" onclick="cancelCorrection()">‚úñÔ∏è <span data-i18n="cancel">Cancel</span></button>
                </div>
            </div>

            <div class="panel-section">
                <h3 class="panel-title" data-i18n="systemInfo">System Info</h3>
                <div id="systemInfo" class="system-info" data-i18n="loading">Loading...</div>
            </div>
        </aside>
    </div>

    <!-- About Modal -->
    <div class="about-modal" id="aboutModal" onclick="hideAbout(event)">
        <div class="about-content" onclick="event.stopPropagation()">
            <div class="about-header">
                <div class="about-title">
                    <span>üéôÔ∏è</span>
                    <span>EzySpeech</span>
                </div>
                <button class="about-close" onclick="hideAbout()">‚úï</button>
            </div>
            <div class="about-body">
                <p><strong>Real-time Speech Transcription</strong></p>
                <p>üåç Let language no longer stand in the way of connection</p>
                <h3>Made with ‚ù§Ô∏è by</h3>
                <p>Ga Hing Woo</p>

                <div class="about-links">
                    <a class="about-link"
                       href="https://github.com/gahingwoo/ezy_speech_translate"
                       rel="noopener noreferrer"
                       target="_blank">
                        <span>‚≠ê</span>
                        <span>GitHub</span>
                    </a>
                    <a class="about-link"
                       href="https://github.com/gahingwoo/ezy_speech_translate/issues/new/choose"
                       rel="noopener noreferrer"
                       target="_blank">
                        <span>üí¨</span>
                        <span>Feedback</span>
                    </a>
                </div>

                <div class="about-version">
                    v3.3.0 ‚Ä¢ Open Source ‚Ä¢ MIT License
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/i18n.js"></script>
    <script src="/static/js/admin.js"></script>
</body>
</html>