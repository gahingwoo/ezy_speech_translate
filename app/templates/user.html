<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>EzySpeech - User Client</title>
    <meta content="Real-time speech translation with TTS support for 20+ languages" name="description">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
    <link href="/static/css/user.css" rel="stylesheet">
    <!-- Google Translate -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,zh-CN,zh-TW',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>
<body data-theme="light">
<!-- Sync Notification Indicator -->
<div aria-live="polite" class="sync-indicator" id="syncIndicator" data-i18n="translationsUpdated">
    ğŸ”„ Translations Updated
</div>

<!-- Header -->
<header class="pf-c-page__header" role="banner">
    <div class="header-left">
        <button
                aria-expanded="false"
                aria-label="Toggle mobile menu"
                class="mobile-menu-toggle"
                id="mobileMenuToggle"
                onclick="toggleMobileMenu()">
            <span aria-hidden="true">â˜°</span>
        </button>
        <div class="brand">
            <span aria-hidden="true">ğŸ™ï¸</span>
            <span data-i18n="brand">EzySpeech User</span>
        </div>
        <div aria-live="polite" class="connection-badge waiting" id="statusBadge" role="status">
            <span aria-hidden="true" class="status-dot"></span>
            <span data-i18n="waiting">Waiting</span>
        </div>
    </div>

    <!-- Desktop Search -->
    <div class="header-search-desktop" id="headerSearchDesktop">
        <input
                aria-label="Search translations"
                class="search-input-header"
                id="searchInput"
                oninput="handleSearch()"
                data-i18n-placeholder="search"
                placeholder="ğŸ” Search..."
                type="search"
        >
    </div>

    <!-- Mobile Search Toggle -->
    <button
            aria-label="Toggle search"
            class="mobile-search-toggle"
            id="mobileSearchToggle"
            onclick="toggleMobileSearch()">
        <span>ğŸ”</span>
    </button>
</header>

<!-- Mobile Search Bar -->
<div class="mobile-search-bar" id="mobileSearchBar">
    <div class="mobile-search-container">
        <input
                aria-label="Search translations"
                class="search-input-mobile"
                id="searchInputMobile"
                oninput="handleSearch()"
                data-i18n-placeholder="searchTranslations"
                placeholder="Search translations..."
                type="search"
        >
    </div>
    <div aria-live="polite" class="search-results-info" id="searchResultsInfo" role="status"
         style="display: none;"></div>
</div>

<!-- Mobile Sidebar Overlay -->
<div aria-hidden="true" class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileMenu()"></div>

<!-- Main Content Container -->
<div class="pf-c-page__main">
    <!-- Sidebar -->
    <aside aria-label="Settings and controls" class="pf-c-page__sidebar" id="sidebar" role="complementary">

        <!-- Translation Settings Section -->
        <section class="sidebar-section">
            <h3 class="sidebar-title" data-i18n="displaySettings">Display Settings</h3>

            <div class="control-group">
                <label class="control-label" for="displayLanguage" data-i18n="displayLanguage">Display Language</label>
                <select aria-label="Select display language" id="displayLanguage" onchange="changeDisplayLanguage()">
                    <option value="en">English</option>
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="zh-tw">ç¹é«”ä¸­æ–‡</option>
                    <option value="yue">ç²µèª</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                    <option value="ko">í•œêµ­ì–´</option>
                    <option value="es">EspaÃ±ol</option>
                    <option value="fr">FranÃ§ais</option>
                    <option value="de">Deutsch</option>
                    <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                    <option value="pt">PortuguÃªs</option>
                    <option value="it">Italiano</option>
                    <option value="nl">Nederlands</option>
                    <option value="pl">Polski</option>
                    <option value="tr">TÃ¼rkÃ§e</option>
                    <option value="vi">Tiáº¿ng Viá»‡t</option>
                    <option value="th">à¹„à¸—à¸¢</option>
                    <option value="id">Bahasa Indonesia</option>
                    <option value="ms">Bahasa Malaysia</option>
                    <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                    <option value="ta">à®¤à®®à®¿à®´à¯</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label" for="displayMode" data-i18n="displayMode">Display Mode</label>
                <select aria-label="Select display mode" id="displayMode" onchange="changeDisplayMode()">
                    <option value="translation" data-i18n="translation">Translation</option>
                    <option value="transcription" data-i18n="transcriptionOnly">Transcription Only</option>
                </select>
            </div>

            <div class="control-group" id="languageSelectGroup">
                <label class="control-label" for="targetLang" data-i18n="targetLanguage">Target Language</label>
                <select aria-label="Select target language" id="targetLang" onchange="changeLanguage()">
                    <option value="yue">Cantonese (ç²µèª)</option>
                    <option value="zh-cn">Chinese Simplified (ç®€ä½“ä¸­æ–‡)</option>
                    <option value="zh-tw">Chinese Traditional (ç¹é«”ä¸­æ–‡)</option>
                    <option value="ja">Japanese (æ—¥æœ¬èª)</option>
                    <option value="ko">Korean (í•œêµ­ì–´)</option>
                    <option value="es">Spanish (EspaÃ±ol)</option>
                    <option value="fr">French (FranÃ§ais)</option>
                    <option value="de">German (Deutsch)</option>
                    <option value="ru">Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                    <option value="ar">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                    <option value="pt">Portuguese (PortuguÃªs)</option>
                    <option value="it">Italian (Italiano)</option>
                    <option value="nl">Dutch (Nederlands)</option>
                    <option value="pl">Polish (Polski)</option>
                    <option value="tr">Turkish (TÃ¼rkÃ§e)</option>
                    <option value="vi">Vietnamese (Tiáº¿ng Viá»‡t)</option>
                    <option value="th">Thai (à¹„à¸—à¸¢)</option>
                    <option value="id">Indonesian (Bahasa Indonesia)</option>
                    <option value="ms">Malay (Bahasa Malaysia)</option>
                    <option value="hi">Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
                    <option value="ta">Tamil (à®¤à®®à®¿à®´à¯)</option>
                </select>
            </div>
        </section>

        <!-- Text-to-Speech Section -->
        <section class="sidebar-section">
            <h3 class="sidebar-title" data-i18n="textToSpeech">Text-to-Speech</h3>

            <div class="control-group">
                <button
                        aria-pressed="false"
                        class="pf-c-button pf-c-button--primary"
                        id="toggleTTS"
                        onclick="toggleTTS()">
                    <span aria-hidden="true">ğŸ”Š</span>
                    <span data-i18n="enableTTS">Enable TTS</span>
                </button>
            </div>

            <div class="control-group">
                <label class="control-label" for="voiceSelect" data-i18n="voice">Voice</label>
                <select aria-label="Select voice" id="voiceSelect" onchange="changeVoice()">
                    <option value="">Loading voices...</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label" for="rateSlider" data-i18n="speed">Speed</label>
                <div class="slider-wrapper">
                    <input
                            aria-label="Speech rate"
                            class="slider"
                            id="rateSlider"
                            max="2"
                            min="0.5"
                            oninput="updateRate()"
                            step="0.1"
                            type="range"
                            value="1">
                    <span class="slider-value" id="rateValue">1.0x</span>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="volumeSlider" data-i18n="volume">Volume</label>
                <div class="slider-wrapper">
                    <input
                            aria-label="Speech volume"
                            class="slider"
                            id="volumeSlider"
                            max="1"
                            min="0"
                            oninput="updateVolume()"
                            step="0.1"
                            type="range"
                            value="1">
                    <span class="slider-value" id="volumeValue">100%</span>
                </div>
            </div>
        </section>

        <!-- Export Section -->
        <section class="sidebar-section">
            <h3 class="sidebar-title" data-i18n="export">Export</h3>

            <div class="control-group">
                <label class="control-label" for="exportFormat" data-i18n="format">Format</label>
                <select aria-label="Select export format" id="exportFormat">
                    <option value="txt">ğŸ“„ Text (TXT)</option>
                    <option value="json">ğŸ“‹ JSON</option>
                    <option value="csv">ğŸ“Š CSV</option>
                    <option value="srt">ğŸ¬ Subtitle (SRT)</option>
                </select>
            </div>

            <div class="control-group">
                <button
                        aria-label="Download translations"
                        class="pf-c-button pf-c-button--success"
                        onclick="exportData()">
                    <span aria-hidden="true">ğŸ’¾</span>
                    <span data-i18n="download">Download</span>
                </button>
            </div>

            <div class="control-group">
                <button
                        aria-label="Clear display"
                        class="pf-c-button pf-c-button--secondary"
                        onclick="clearLocal()">
                    <span aria-hidden="true">ğŸ—‘ï¸</span>
                    <span data-i18n="clearDisplay">Clear Display</span>
                </button>
            </div>
        </section>

        <!-- Settings Section -->
        <section class="sidebar-section">
            <h3 class="sidebar-title" data-i18n="settings">Settings</h3>

            <div class="control-group">
                <label class="control-label" for="fontSizeSlider" data-i18n="fontSize">Font Size</label>
                <div class="slider-wrapper">
                    <input
                            aria-label="Translation font size"
                            class="slider"
                            id="fontSizeSlider"
                            max="24"
                            min="12"
                            oninput="updateFontSize()"
                            step="1"
                            type="range"
                            value="18">
                    <span class="slider-value" id="fontSizeValue">18px</span>
                </div>
            </div>

            <div class="control-group">
                <button
                        aria-label="Toggle theme"
                        class="sidebar-menu-item"
                        onclick="toggleTheme()">
                    <span aria-hidden="true" id="themeIcon">ğŸŒ™</span>
                    <span id="themeText" data-i18n="darkMode">Dark Mode</span>
                </button>
            </div>

            <div class="control-group">
                <button
                        aria-label="Reset settings"
                        class="sidebar-menu-item"
                        onclick="resetSettings()">
                    <span aria-hidden="true">ğŸ”„</span>
                    <span data-i18n="resetSettings">Reset Settings</span>
                </button>
            </div>

            <div class="control-group">
                <button
                        aria-label="About"
                        class="sidebar-menu-item"
                        onclick="showAbout()">
                    <span aria-hidden="true">â„¹ï¸</span>
                    <span data-i18n="about">About</span>
                </button>
            </div>
        </section>
    </aside>

    <!-- Main Section -->
    <section aria-label="Translation list" class="pf-c-page__main-section" role="main">
        <div class="content-header">
            <h2 class="content-title" id="mainTitle">
                <span id="mainTitleText" data-i18n="liveTranslations">Live Translations</span>
                <span aria-label="Translation count" class="count-badge" id="itemCount">0</span>
            </h2>
        </div>

        <div class="translation-list" id="translationsList" role="list">
            <div class="empty-state" role="status">
                <div aria-hidden="true" class="empty-icon">ğŸ’¬</div>
                <div id="emptyStateText" data-i18n="waitingTranslations">Waiting for translations...</div>
                <small id="emptyStateDesc" style="display: block; margin-top: 0.5rem; opacity: 0.7;" data-i18n="waitingDesc">
                    Translations will appear here in real-time
                </small>
            </div>
        </div>
    </section>
</div>

<!-- About Modal -->
<div aria-labelledby="aboutTitle" aria-modal="true" class="about-modal" id="aboutModal" onclick="hideAbout(event)"
     role="dialog">
    <div class="about-content" onclick="event.stopPropagation()">
        <div class="about-header">
            <div class="about-title" id="aboutTitle">
                <span aria-hidden="true">ğŸ™ï¸</span>
                <span data-i18n="aboutTitle">EzySpeech</span>
            </div>
            <button
                    aria-label="Close about dialog"
                    class="about-close"
                    onclick="hideAbout()">
                âœ•
            </button>
        </div>
        <div class="about-body">
            <p>ğŸŒ Let language no longer stand in the way of connection</p>

            <h3 data-i18n="madeBy">Made with â¤ï¸ by</h3>
            <p data-i18n="author">Ga Hing Woo</p>

            <div class="about-links">
                <a class="about-link"
                   href="https://github.com/gahingwoo/ezy_speech_translate"
                   rel="noopener noreferrer"
                   target="_blank">
                    <span>â­</span>
                    <span>GitHub</span>
                </a>
                <a class="about-link"
                   href="https://github.com/gahingwoo/ezy_speech_translate/issues/new/choose"
                   rel="noopener noreferrer"
                   target="_blank">
                    <span>ğŸ’¬</span>
                    <span data-i18n="feedback">Feedback</span>
                </a>
            </div>

            <div class="about-version">
                v3.3.0 â€¢ Open Source â€¢ MIT License
            </div>
        </div>
    </div>
</div>

<!-- Scroll to Top Button -->
<button
        aria-label="Scroll to top"
        class="scroll-to-top"
        id="scrollToTopBtn"
        onclick="scrollToTop()">
    â†‘
</button>

<!-- Google Translate Element -->
<div id="google_translate_element" style="display: none;"></div>

<script src="/static/js/user.js"></script>
</body>
</html>